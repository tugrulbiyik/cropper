<!DOCTYPE html>
<html lang="en" class="<meta name=" viewport" content="width=device-width">
<head>
<meta charset="UTF-8">
<title>test</title>
<link rel='stylesheet' href='css/cropper.css'>
<link rel="stylesheet" href="css/style.css">
<script>
  window.console = window.console || function(t) {};
</script>
<script>
  if (document.location.search.match(/type=embed/gi)) {
    window.parent.postMessage("resize", "*");
  }
</script>
</head>
<body translate="no">
<main class="page">
  <div class="box">
    <input type="file" id="file-input">
  </div>
  <div class="box-2">
    <div class="result"></div>
  </div>
  <div class="box-2 img-result hide">
    <img class="cropped" src="" alt="">
  </div>

  <div class="box">
    <div class="options hide">
      <label>
         Geni≈ülik
       </label>
      <input type="number" class="img-w" value="300" min="100" max="1200" />
    </div>
    <button class="btn save hide">Save</button>
    <a href="" class="btn download hide">Download</a>
  </div>
</main>
<script src='js/cropper.js'></script>
<script id="rendered-js">
// vars
let result = document.querySelector('.result'),
img_result = document.querySelector('.img-result'),
img_w = document.querySelector('.img-w'),
img_h = document.querySelector('.img-h'),
options = document.querySelector('.options'),
save = document.querySelector('.save'),
cropped = document.querySelector('.cropped'),
dwn = document.querySelector('.download'),
upload = document.querySelector('#file-input'),
cropper = '';

// on change show image with crop options
upload.addEventListener('change', e => {
  if (e.target.files.length) {
    // start file reader
    const reader = new FileReader();
    reader.onload = e => {
      if (e.target.result) {
        // create new image
        let img = document.createElement('img');
        img.id = 'image';
        img.src = e.target.result;
        // clean result before
        result.innerHTML = '';
        // append new image
        result.appendChild(img);
        // show save btn and options
        save.classList.remove('hide');
        options.classList.remove('hide');
        // init cropper
        cropper = new Cropper(img);
      }
    };
    reader.readAsDataURL(e.target.files[0]);
  }
});

// save on click
save.addEventListener('click', e => {
  e.preventDefault();
  // get result to data uri
  let imgSrc = cropper.getCroppedCanvas({
    width: img_w.value // input value
  }).toDataURL();
  // remove hide class of img
  cropped.classList.remove('hide');
  img_result.classList.remove('hide');
  // show image cropped
  cropped.src = imgSrc;
  dwn.classList.remove('hide');
  dwn.download = 'imagename.png';
  dwn.setAttribute('href', imgSrc);
});
//# sourceURL=pen.js
    </script>
</body>
</html>
